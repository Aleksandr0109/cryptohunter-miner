<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoHunter Miner</title>
    <link rel="stylesheet" href="/webapp/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="/webapp/script.js" defer></script>
    <style>
        /* ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø QR –ò –û–ü–õ–ê–¢–´ ===== */
        .payment-card {
            background: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(0, 255, 204, 0.3);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #00ffcc;
        }
        .qr-container {
            margin-bottom: 20px;
        }
        .qr-container img {
            width: 200px;
            height: auto;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        .payment-field {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin: 14px 0;
            width: 100%;
        }
        .payment-field label {
            font-size: 13px;
            color: #aaa;
            margin-bottom: 6px;
            font-weight: 500;
        }
        .field-value {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 12px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #fff;
            word-break: break-all;
            text-align: left;
        }
        .copy-mini-btn {
            background: rgba(0, 255, 204, 0.15);
            border: 1px solid rgba(0, 255, 204, 0.3);
            color: #00ffcc;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        .copy-mini-btn:hover {
            background: rgba(0, 255, 204, 0.3);
            transform: scale(1.1);
        }
        .ton-payment-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #00dbde, #fc00ff);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 14px 20px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            margin: 15px auto;
            width: 100%;
            max-width: 280px;
            box-shadow: 0 4px 15px rgba(0, 219, 222, 0.4);
            transition: all 0.3s ease;
        }
        .ton-payment-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 219, 222, 0.6);
        }
        .ton-icon {
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- === –ó–ê–ì–û–õ–û–í–û–ö === -->
        <div class="header">
            <h1>CryptoHunter</h1>
            <div class="language-switcher">
                <button id="lang-ru" class="lang-btn active" onclick="changeLanguage('ru')">RU</button>
                <button id="lang-en" class="lang-btn" onclick="changeLanguage('en')">ENG</button>
            </div>
        </div>

        <!-- === –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù === -->
        <div id="stats" class="section active">
            <img src="/webapp/assets/mining.gif" alt="Mining" class="mining-gif">
            
            <div class="top-actions">
                <button onclick="showSection('invest')" class="action-btn invest">
                    <img src="/webapp/assets/deposit.png" alt="–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å" style="width:24px;height:24px;">
                    <span data-i18n="invest">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                </button>
                <button onclick="showSection('withdraw')" class="action-btn withdraw">
                    <img src="/webapp/assets/withdraw.png" alt="–í—ã–≤–æ–¥" style="width:24px;height:24px;">
                    <span data-i18n="withdraw">–í—ã–≤–æ–¥</span>
                </button>
            </div>

            <div class="balance-card">
                <p data-i18n="your_balance">–í–ê–® –ë–ê–õ–ê–ù–°</p>
                <h2 id="balance">0.0000</h2>
                <p>TON</p>
            </div>

            <div class="stats-grid">
                <div class="stat"><p data-i18n="invested">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ</p><b id="invested">0.00</b></div>
                <div class="stat"><p data-i18n="earned">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</p><b id="earned">0.0000</b></div>
                <div class="stat"><p data-i18n="speed">–°–∫–æ—Ä–æ—Å—Ç—å</p><b id="speed">100%</b></div>
            </div>

            <div class="nav-buttons">
                <button onclick="showSection('dashboard')" class="nav-btn">
                    <img src="/webapp/assets/stats.png" alt="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" style="width:18px;height:18px;">
                    <span data-i18n="detailed_stats">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                </button>
                <button onclick="showSection('referral')" class="nav-btn">
                    <img src="/webapp/assets/referral.png" alt="–†–µ—Ñ–µ—Ä–∞–ª—ã" style="width:18px;height:18px;">
                    <span data-i18n="referral_program">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</span>
                </button>
            </div>

            <button id="refresh-btn" class="btn big-btn" style="margin:20px auto;display:block;background:#4CAF50;" onclick="refresh()">
                <span data-i18n="refresh">–û–±–Ω–æ–≤–∏—Ç—å</span>
            </button>
        </div>

        <!-- === –î–ï–¢–ê–õ–¨–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê === -->
        <div id="dashboard" class="section">
            <div class="card">
                <h2 data-i18n="detailed_stats">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                
                <div class="stats-section">
                    <h3 data-i18n="community">–°–û–û–ë–©–ï–°–¢–í–û</h3>
                    <div class="stat-row">
                        <span data-i18n="total_subscribers">–í—Å–µ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤:</span>
                        <b id="total-subscribers">0</b>
                    </div>
                    <div class="stat-row">
                        <span data-i18n="active_today">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è:</span>
                        <b id="active-today">0</b>
                    </div>
                </div>

                <div class="stats-section">
                    <h3 data-i18n="investments">–ò–ù–í–ï–°–¢–ò–¶–ò–ò</h3>
                    <div class="stat-row"><span data-i18n="amount">–°—É–º–º–∞:</span><b id="dash-invested">0.00 TON</b></div>
                    <div class="stat-row"><span data-i18n="day">–î–µ–Ω—å:</span><b id="dash-daily-inv">0.000 TON</b></div>
                    <div class="stat-row"><span data-i18n="week">–ù–µ–¥–µ–ª—è:</span><b id="dash-weekly-inv">0.000 TON</b></div>
                    <div class="stat-row"><span data-i18n="month">–ú–µ—Å—è—Ü:</span><b id="dash-monthly-inv">0.00 TON</b></div>
                </div>

                <div class="stats-section">
                    <h3 data-i18n="free_mining">–ë–ï–°–ü–õ–ê–¢–ù–´–ô –ú–ê–ô–ù–ò–ù–ì</h3>
                    <div class="stat-row"><span data-i18n="speed">–°–∫–æ—Ä–æ—Å—Ç—å:</span><b id="dash-speed">100%</b></div>
                    <div class="stat-row"><span data-i18n="day">–î–µ–Ω—å:</span><b id="dash-daily-free">0.0000 TON</b></div>
                    <div class="stat-row"><span data-i18n="ton_per_days">1 TON –∑–∞:</span><b id="dash-days-per-ton">0.0 –¥–Ω–µ–π</b></div>
                    <div class="stat-row"><span data-i18n="accumulated">–ù–∞–∫–æ–ø–ª–µ–Ω–æ:</span><b id="dash-accumulated">0.00 TON</b></div>
                </div>

                <div class="stats-section">
                    <h3 data-i18n="currently_earning">–°–ï–ô–ß–ê–° –ù–ê–ß–ò–°–õ–Ø–ï–¢–°–Ø</h3>
                    <div class="stat-row"><span data-i18n="per_day">–í –¥–µ–Ω—å:</span><b id="dash-total-daily">0.0000 TON</b></div>
                    <div class="stat-row"><span data-i18n="per_hour">–í —á–∞—Å:</span><b id="dash-hourly">0.0000 TON</b></div>
                </div>

                <!-- –¢–û–ü 10 –ò–ù–í–ï–°–¢–û–†–û–í -->
                <div class="stats-section">
                    <h3 data-i18n="top_investors">–¢–û–ü 10 –ò–ù–í–ï–°–¢–û–†–û–í</h3>
                    <div id="top-investors-list" class="list-box">
                        <div class="investor-row">
                            <div class="investor-rank">#1</div>
                            <div class="investor-name">CryptoWolf</div>
                            <div class="investor-amount">15,245.50 TON</div>
                            <div class="investor-change positive">‚Üó 2.3%</div>
                        </div>
                        <div class="investor-row">
                            <div class="investor-rank">#2</div>
                            <div class="investor-name">TONHunter</div>
                            <div class="investor-amount">12,890.25 TON</div>
                            <div class="investor-change positive">‚Üó 1.8%</div>
                        </div>
                        <div class="investor-row">
                            <div class="investor-rank">#3</div>
                            <div class="investor-name">BlockShark</div>
                            <div class="investor-amount">11,567.80 TON</div>
                            <div class="investor-change negative">‚Üò 0.5%</div>
                        </div>
                        <div class="investor-row">
                            <div class="investor-rank">#4</div>
                            <div class="investor-name">Moonrider</div>
                            <div class="investor-amount">8,945.30 TON</div>
                            <div class="investor-change positive">‚Üó 3.1%</div>
                        </div>
                        <div class="investor-row">
                            <div class="investor-rank">#5</div>
                            <div class="investor-name">Tonik</div>
                            <div class="investor-amount">7,234.15 TON</div>
                            <div class="investor-change positive">‚Üó 1.2%</div>
                        </div>
                    </div>
                </div>

                <!-- –ó–ê–Ø–í–ö–ò –ù–ê –í–´–í–û–î -->
                <div class="stats-section">
                    <h3 data-i18n="withdraw_requests">–ó–ê–Ø–í–ö–ò –ù–ê –í–´–í–û–î</h3>
                    <div id="withdraw-requests-list" class="list-box">
                        <div class="withdraw-row completed">
                            <div class="withdraw-user">Andrey</div>
                            <div class="withdraw-amount">125.50 TON</div>
                            <div class="withdraw-address">kQ1234...abcd</div>
                            <div class="withdraw-status completed">–í—ã–ø–æ–ª–Ω–µ–Ω</div>
                            <div class="withdraw-time">2—á 15–º –Ω–∞–∑–∞–¥</div>
                        </div>
                        <div class="withdraw-row processing">
                            <div class="withdraw-user">Ivan</div>
                            <div class="withdraw-amount">89.75 TON</div>
                            <div class="withdraw-address">UQ5678...efgh</div>
                            <div class="withdraw-status processing">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
                            <div class="withdraw-time">45–º –Ω–∞–∑–∞–¥</div>
                        </div>
                        <div class="withdraw-row pending">
                            <div class="withdraw-user">Anna</div>
                            <div class="withdraw-amount">234.20 TON</div>
                            <div class="withdraw-address">EQ9012...ijkl</div>
                            <div class="withdraw-status pending">–û–∂–∏–¥–∞–Ω–∏–µ</div>
                            <div class="withdraw-time">15–º –Ω–∞–∑–∞–¥</div>
                        </div>
                        <div class="withdraw-row completed">
                            <div class="withdraw-user">Sergey</div>
                            <div class="withdraw-amount">67.80 TON</div>
                            <div class="withdraw-address">kQ3456...mnop</div>
                            <div class="withdraw-status completed">–í—ã–ø–æ–ª–Ω–µ–Ω</div>
                            <div class="withdraw-time">5—á 30–º –Ω–∞–∑–∞–¥</div>
                        </div>
                    </div>
                </div>

                <div class="stats-section">
                    <h3>–í—ã–≤–æ–¥</h3>
                    <div class="stat-row"><span id="dash-withdraw-status">- <span data-i18n="not_ready">–ù–µ –≥–æ—Ç–æ–≤–æ</span></span></div>
                    <div class="stat-row"><span id="dash-min-withdraw" data-i18n="min_withdraw">–ú–∏–Ω–∏–º—É–º: 1 TON (1.00 TON –æ—Å—Ç–∞–ª–æ—Å—å)</span></div>
                </div>
            </div>
            <button onclick="showSection('stats')" class="btn back" data-i18n="back">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- === –†–ï–§–ï–†–ê–õ–´ === -->
        <div id="referral" class="section">
            <div class="card">
                <h2 data-i18n="referral_program">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h2>
                
                <div class="ref-stats">
                    <div class="ref-stat">
                        <div class="ref-stat-value" id="ref-direct">0</div>
                        <div class="ref-stat-label" data-i18n="direct_referrals">–ø—Ä—è–º—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</div>
                    </div>
                    <div class="ref-stat">
                        <div class="ref-stat-value" id="ref-level2">0</div>
                        <div class="ref-stat-label" data-i18n="level_2">2-–π —É—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                    <div class="ref-stat">
                        <div class="ref-stat-value" id="ref-income">0.00</div>
                        <div class="ref-stat-label" data-i18n="earned_ton">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ TON</div>
                    </div>
                </div>

                <div class="ref-link-container">
                    <p data-i18n="your_referral_link">–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</p>
                    <div class="ref-link-box" id="ref-link">https://t.me/cruptos023bot?start=ref_123</div>
                    <button onclick="copyLink()" class="btn copy-btn" data-i18n="copy_link">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>
            </div>
            <button onclick="showSection('stats')" class="btn back" data-i18n="back">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- === –ò–ù–í–ï–°–¢ + –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† === -->
        <div id="invest" class="section">
            <div class="card">
                <h2 data-i18n="investing">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
                
                <!-- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –î–û–•–û–î–ù–û–°–¢–ò -->
                <div class="calculator-section" style="margin-bottom: 25px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: white;">
                    <h3 style="margin: 0 0 15px 0; text-align: center;" data-i18n="profit_calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏</h3>
                    
                    <div class="input-group" style="margin-bottom: 15px;">
                        <label style="color: white;" data-i18n="investment_amount">–°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (TON):</label>
                        <input type="number" id="calc-amount" class="input-field" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" min="1" value="10" 
                               style="background: rgba(255,255,255,0.9); color: #333;"
                               oninput="calculateProfit()">
                    </div>
                    
                    <div class="calculator-results" style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 12px; backdrop-filter: blur(10px);">
                        <div class="calc-result-row">
                            <span data-i18n="daily_income">–î–æ—Ö–æ–¥ –≤ –¥–µ–Ω—å:</span>
                            <b id="calc-daily">0.0000 TON</b>
                        </div>
                        <div class="calc-result-row">
                            <span data-i18n="weekly_income">–î–æ—Ö–æ–¥ –≤ –Ω–µ–¥–µ–ª—é:</span>
                            <b id="calc-weekly">0.0000 TON</b>
                        </div>
                        <div class="calc-result-row">
                            <span data-i18n="monthly_income">–î–æ—Ö–æ–¥ –≤ –º–µ—Å—è—Ü:</span>
                            <b id="calc-monthly">0.0000 TON</b>
                        </div>
                        <div class="calc-result-row">
                            <span data-i18n="yearly_income">–î–æ—Ö–æ–¥ –≤ –≥–æ–¥:</span>
                            <b id="calc-yearly">0.0000 TON</b>
                        </div>
                        <div class="calc-result-row" style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px; margin-top: 10px;">
                            <span data-i18n="welcome_bonus">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å:</span>
                            <b id="calc-bonus" style="color: #4CAF50;">+0.00 TON</b>
                        </div>
                    </div>
                </div>

                <!-- –§–û–†–ú–ê –ò–ù–í–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø -->
                <div class="input-group">
                    <label data-i18n="investment_amount">–°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (TON):</label>
                    <input type="number" id="invest-amount" class="input-field" placeholder="–ú–∏–Ω–∏–º—É–º 1 TON" min="1">
                </div>

                <button onclick="createDeposit()" class="btn big-btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å QR –¥–ª—è –æ–ø–ª–∞—Ç—ã</button>

                <!-- –£–õ–£–ß–®–ï–ù–ù–´–ô –ë–õ–û–ö –û–ü–õ–ê–¢–´ -->
                <div id="qr-section" style="display:none;">
                    <div class="payment-card">
                        <p class="section-title" data-i18n="scan_qr">–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç—ã</p>
                        <div class="qr-container">
                            <img id="qr-img" alt="QR Code">
                        </div>

                        <div class="payment-field">
                            <label data-i18n="ton_address">–ê–¥—Ä–µ—Å TON</label>
                            <div class="field-value">
                                <code id="qr-address-short">‚Äî</code>
                                <button class="copy-mini-btn" onclick="copyAddress()">üìã</button>
                            </div>
                        </div>

                        <div class="payment-field">
                            <label data-i18n="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                            <div class="field-value">
                                <code id="qr-comment-text">‚Äî</code>
                                <button class="copy-mini-btn" onclick="copyComment()">üìã</button>
                            </div>
                        </div>

                        <a id="payment-url" href="#" target="_blank" style="display:none;"></a>
                        <button class="ton-payment-btn" onclick="openTonWallet()">
                            <span class="ton-icon">‚óâ</span> –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ TON –∫–æ—à–µ–ª–µ–∫
                        </button>
                    </div>
                </div>
            </div>
            <button onclick="showSection('stats')" class="btn back" data-i18n="back">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- === –í–´–í–û–î === -->
        <div id="withdraw" class="section">
            <div class="card">
                <h2 data-i18n="withdraw_funds">–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
                
                <p data-i18n="available_for_withdraw">–î–æ—Å—Ç—É–ø–Ω–æ: <b id="withdraw-available">0.0000</b> TON</p>
                
                <div class="input-group">
                    <label data-i18n="ton_wallet_address">–ê–¥—Ä–µ—Å TON –∫–æ—à–µ–ª—å–∫–∞:</label>
                    <input type="text" id="withdraw-address" class="input-field" placeholder="–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å kQ, UQ –∏–ª–∏ EQ">
                </div>
                
                <div class="input-group">
                    <label data-i18n="withdraw_amount">–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞ (TON):</label>
                    <input type="number" id="withdraw-amount" class="input-field" placeholder="–ú–∏–Ω–∏–º—É–º 1 TON" min="1">
                </div>

                <button onclick="withdraw()" class="btn big-btn">–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
                
                <div id="withdraw-status" class="status-message"></div>
            </div>
            <button onclick="showSection('stats')" class="btn back" data-i18n="back">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- === –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø === -->
    <div id="notification" class="notification"></div>

    <!-- === –í–°–¢–†–û–ï–ù–ù–´–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† + –§–£–ù–ö–¶–ò–ò –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø === -->
    <script>
        // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ===
        function calculateProfit() {
            const input = document.getElementById('calc-amount');
            const amount = parseFloat(input?.value) || 0;

            const results = {
                daily: 0,
                weekly: 0,
                monthly: 0,
                yearly: 0,
                bonus: 0
            };

            if (amount >= 1) {
                const MONTHLY_RATE = 0.25;
                const BASE_MINING_DAYS = 90;
                const BONUS_PERCENT = 0.05;

                const investmentDaily = amount * (MONTHLY_RATE / 30);
                const acceleration = Math.floor(amount / 40) * 0.01;
                const miningSpeed = 1 + acceleration;
                const freeMiningDaily = (1 / BASE_MINING_DAYS) * miningSpeed;
                const totalDaily = investmentDaily + freeMiningDaily;
                const bonus = amount * BONUS_PERCENT;

                results.daily = totalDaily;
                results.weekly = totalDaily * 7;
                results.monthly = totalDaily * 30;
                results.yearly = totalDaily * 365;
                results.bonus = bonus;
            }

            const set = (id, value, fixed = 4) => {
                const el = document.getElementById(id);
                if (el) el.textContent = value.toFixed(fixed) + ' TON';
            };

            set('calc-daily', results.daily, 6);
            set('calc-weekly', results.weekly, 6);
            set('calc-monthly', results.monthly, 4);
            set('calc-yearly', results.yearly, 2);
            document.getElementById('calc-bonus').textContent = '+' + results.bonus.toFixed(2) + ' TON';
        }

        // === –ö–û–ü–ò–†–û–í–ê–ù–ò–ï ===
        function copyToClipboard(text, successKey) {
            if (!text) return showNotification("no_address", "error");
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification(successKey || "address_copied", "success");
                }).catch(fallbackCopy);
            } else {
                fallbackCopy();
            }
            function fallbackCopy() {
                const ta = document.createElement("textarea");
                ta.value = text;
                ta.style.position = "fixed"; ta.style.opacity = "0";
                document.body.appendChild(ta);
                ta.select();
                try { document.execCommand("copy"); } catch (e) {}
                document.body.removeChild(ta);
            }
        }

        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
        function copyAddress() {
            const full = document.getElementById('qr-address')?.textContent || '';
            copyToClipboard(full, "address_copied");
        }
        function copyComment() {
            const comment = document.getElementById('qr-comment-text')?.textContent || '';
            copyToClipboard(comment, "address_copied");
        }
        function copyPaymentUrl() {
            const url = document.getElementById('payment-url')?.href || '';
            copyToClipboard(url, "payment_url_copied");
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        function openTonWallet() {
            const url = document.getElementById('payment-url')?.href;
            if (url) window.open(url, '_blank');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
        function updateShortAddress(fullAddress) {
            if (!fullAddress || fullAddress === '‚Äî') {
                document.getElementById('qr-address-short').textContent = '‚Äî';
                return;
            }
            if (fullAddress.length > 12) {
                const short = fullAddress.slice(0, 6) + '...' + fullAddress.slice(-6);
                document.getElementById('qr-address-short').textContent = short;
            } else {
                document.getElementById('qr-address-short').textContent = fullAddress;
            }
        }

        // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ (–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å script.js)
        const targetNode = document.getElementById('qr-address');
        if (targetNode) {
            const observer = new MutationObserver(() => {
                updateShortAddress(targetNode.textContent);
            });
            observer.observe(targetNode, { childList: true, subtree: true });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        document.addEventListener('DOMContentLoaded', () => {
            calculateProfit();
        });
    </script>
</body>
</html>
